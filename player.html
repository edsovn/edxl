<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Player Personalizado</title>
<script src="https://ssl.p.jwpcdn.com/player/v/8.36.4/jwplayer.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #000;
    height: 100%;
  }

  #player-wrapper {
    aspect-ratio: 16 / 9;
    width: 100%;
    max-width: 100%;
    background: #000;
    position: relative;
  }

  #player {
    width: 100%;
    height: 100%;
  }

  #custom-controls {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(0, 0, 0, 0.7);
    padding: 0.5rem 1rem;
    box-sizing: border-box;
    z-index: 10;
  }

  .controls-left, .controls-right {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .control-btn svg {
    width: 24px;
    height: 24px;
    fill: #fff;
    cursor: pointer;
    transition: fill 0.2s;
  }

  .control-btn svg:hover {
    fill: #ccc;
  }

  input[type="range"] {
    width: 80px;
  }

  #time-display {
    color: #fff;
    font-family: monospace;
    font-size: 14px;
    margin-left: 0.5rem;
  }
</style>
</head>
<body>
<div id="player-wrapper">
  <div id="player">Carregando player...</div>
  <div id="custom-controls">
    <div class="controls-left">
      <div class="control-btn" id="btn-playpause">
        <svg id="icon-play" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="#fff" d="M8 5v14l11-7z"/></svg>
        <svg id="icon-pause" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="display:none"><path fill="#fff" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
      </div>
      <div class="control-btn" id="btn-rewind">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"><path fill="#fff" d="M113.2,131.078a21.589,21.589,0,0,0-17.7-10.6..."/></svg>
      </div>
      <div class="control-btn" id="btn-forward">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"><path fill="#fff" d="m 25.993957,57.778 v 125.3 c..."/></svg>
      </div>
      <div class="control-btn" id="btn-skip">
        <img src="https://www.anitube.vip/img/skip.svg?version=0.0.1" alt="Skip" style="width:24px;height:24px;filter:invert(1);">
      </div>
      <input type="range" id="volume-slider" min="0" max="100" value="100">
      <div id="time-display">00:00 / 00:00</div>
    </div>
    <div class="controls-right">
      <div class="control-btn" id="btn-download">
        <svg xmlns='http://www.w3.org/2000/svg' width='24px' height='24px' viewBox='0 0 20 21'><path fill='#fff' d='M10.9 12.95c-.5.44-1.3.44-1.8 0...'/></svg>
      </div>
      <select id="speed-select">
        <option value="0.5">0.5x</option>
        <option value="0.75">0.75x</option>
        <option value="1" selected>1x</option>
        <option value="1.25">1.25x</option>
        <option value="1.5">1.5x</option>
        <option value="2">2x</option>
      </select>
      <div class="control-btn" id="btn-pip">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#fff" viewBox="0 0 24 24"><path d="M19 7h-6v6h6V7z"/><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14z"/></svg>
      </div>
      <div class="control-btn" id="btn-fullscreen">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#fff" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zm0-12h-3v2h3v3h2V5h-2z"/></svg>
      </div>
    </div>
  </div>
</div>
<script>
  jwplayer.key = 'XsK+VuloUK5YB+O7Z6I3aD4DP42TKEoQd2MLvA==';
  const VIDEO_URL = new URLSearchParams(location.search).get("video") || "";
  const DOWNLOAD_URL = VIDEO_URL.replace("raw=1", "dl=1");
  let player = jwplayer("player").setup({
    file: VIDEO_URL,
    width: "100%",
    height: "100%",
    controls: false,
    autostart: false,
    volume: 100
  });

  const iconPlay = document.getElementById("icon-play");
  const iconPause = document.getElementById("icon-pause");

  const updateTimeDisplay = () => {
    const pos = player.getPosition();
    const dur = player.getDuration();
    const format = s => {
      const m = Math.floor(s / 60), sec = Math.floor(s % 60);
      return `${m}:${sec < 10 ? '0' : ''}${sec}`;
    };
    document.getElementById("time-display").textContent = `${format(pos)} / ${format(dur)}`;
  };

  document.getElementById("btn-playpause").onclick = () => {
    if (player.getState() === "playing") {
      player.pause();
    } else {
      player.play();
    }
  };

  document.getElementById("btn-rewind").onclick = () => {
    const time = Math.max(0, player.getPosition() - 10);
    player.seek(time);
  };

  document.getElementById("btn-forward").onclick = () => {
    player.seek(player.getPosition() + 10);
  };

  document.getElementById("btn-skip").onclick = () => {
    player.seek(player.getPosition() + 82);
  };

  document.getElementById("volume-slider").oninput = (e) => {
    player.setVolume(parseInt(e.target.value));
  };

  document.getElementById("btn-download").onclick = () => {
    const a = document.createElement("a");
    a.href = DOWNLOAD_URL;
    a.download = "video.mp4";
    a.click();
  };

  document.getElementById("speed-select").onchange = (e) => {
    player.setPlaybackRate(parseFloat(e.target.value));
  };

  document.getElementById("btn-fullscreen").onclick = () => {
    player.setFullscreen(!player.getFullscreen());
  };

  document.getElementById("btn-pip").onclick = () => {
    const videoEl = player.getContainer().querySelector("video");
    if (videoEl) {
      if (document.pictureInPictureElement) {
        document.exitPictureInPicture();
      } else {
        videoEl.requestPictureInPicture().catch(console.error);
      }
    }
  };

  player.on("play", () => {
    iconPlay.style.display = "none";
    iconPause.style.display = "inline";
  });
  player.on("pause", () => {
    iconPlay.style.display = "inline";
    iconPause.style.display = "none";
  });
  player.on("time", updateTimeDisplay);
</script>
</body>
</html>
